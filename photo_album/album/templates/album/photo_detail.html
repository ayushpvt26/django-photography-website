{% extends 'base.html' %}
{% load thumbnail %}
{% block content %}

{% if album %}
<p><a href="{{ album.get_absolute_url }}">&lt; Back to {{ album.title }}</a></p>
{% elif object.event %}
<p><a href="{{ object.event.get_absolute_url }}">&lt; Back to {{ object.event.title }}</a></p>
{% endif %}

<h2>{{ object.title }}</h2>
<p>{{ object.description }}</p>

<div id="image">
    {% thumbnail object.picture "670" as im %}
    <img src="{{ im.url }}">
    {% endthumbnail %}
    <div id="about-image">
        <div id="map_canvas" style="width: 240px; height: 100px;"></div>
        <p>This photo was taken at <a href="{{ object.event.get_absolute_url }}">{{ object.event.title }}</a> and is featured in the
        {% for album in object.albums.all %}
        {% if forloop.last %}and {% elif not forloop.first %}, {% endif %}<a href="{{ album.get_absolute_url }}">{{ album.title }}</a>
        {% endfor %} album{{ object.albums.all.count|pluralize:"s" }}.</p>
        <h3>Camera Information</h3>
        <table>
            <tr>
                <th>Camera</th>
                <td>{{ object.camera }}</td>
            </tr>
            <tr>
                <th>Lens</th>
                <td>{{ object.lens }}</td>
            </tr>
            <tr>
                <th>Date taken</th>
                <td>{{ object.date_time_taken }}</td>
            </tr>
            <tr>
                <th>Shutter Speed</th>
                <td>{{ object.shutter_speed }}</td>
            </tr>
            <tr>
                <th>F Number</th>
                <td>f/{{ object.f_number }}</td>
            </tr>
            <tr>
                <th>Focal Length</th>
                <td>{{ object.focal_length }}mm</td>
            </tr>
            <tr>
                <th>ISO Speed</th>
                <td>{{ object.iso_speed }}</td>
            </tr>
            <tr>
                <th>Exposure program</th>
                <td>{{ object.exposure_program }}</td>
            </tr>
            <tr>
                <th>Metering mode</th>
                <td>{{ object.metering_mode }}</td>
            </tr>
        </table>
    </div>
</div>
{% if album %}
<p><a href="{{ album.get_absolute_url }}">&lt; Back to {{ album.title }}</a></p>
{% elif object.event %}
<p><a href="{{ object.event.get_absolute_url }}">&lt; Back to {{ object.event.title }}</a></p>
{% endif %}
{% endblock content %}

{% block js %}
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?key={{ settings.MAP_API_KEY }}&sensor=false">
</script>
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng({{ object.event.latitude }}, {{ object.event.longitude }}),
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

    var marker = new google.maps.Marker({
      position: new google.maps.LatLng({{ object.event.latitude }}, {{ object.event.longitude }}),
      map: map
    });
  }
</script>
{% endblock js %}

{% block extend_body %}onload="initialize()"{% endblock extend_body %}
